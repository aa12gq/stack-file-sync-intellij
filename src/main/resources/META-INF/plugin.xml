<!-- Plugin Configuration File. Read more: https://plugins.jetbrains.com/docs/intellij/plugin-configuration-file.html -->
<idea-plugin>
    <!-- Unique identifier of the plugin. It should be FQN. It cannot be changed between the plugin versions. -->
    <id>com.stackfilesync.plugin</id>

    <!-- Public plugin name should be written in Title Case.
         Guidelines: https://plugins.jetbrains.com/docs/marketplace/plugin-overview-page.html#plugin-name -->
    <name>Stack File Sync</name>

    <!-- ‰æõÂ∫îÂïÜ‰ø°ÊÅØ -->
    <vendor email="aa12gq@gmail.com" url="https://github.com/aa12gq">aa12gq</vendor>

    <!-- Description of the plugin displayed on the Plugin Page and IDE Plugin Manager.
         Simple HTML elements (text formatting, paragraphs, and lists) can be added inside of <![CDATA[ ]]> tag.
         Guidelines: https://plugins.jetbrains.com/docs/marketplace/plugin-overview-page.html#plugin-description -->
    <description><![CDATA[
        <h1>Stack File Sync</h1>
        <p>A powerful plugin for synchronizing files and code snippets between multiple projects. It provides a simple and flexible way to manage and sync your code assets.</p>
        
        <p><img src="https://raw.githubusercontent.com/aa12gq/stack-file-sync-intellij/main/docs/images/demonstration.gif" alt="Demonstration" width="800"/></p>
        
        <h2>Key Features</h2>
        <ul>
            <li>üîÑ Real-time File Sync
                <ul>
                    <li>Full sync and selective sync support</li>
                    <li>File pattern filtering</li>
                    <li>Automatic backup</li>
                </ul>
            </li>
            <li>‚ö° Auto Sync
                <ul>
                    <li>Configurable sync intervals</li>
                    <li>Per-repository configuration</li>
                    <li>Auto-restore after IDE restart</li>
                </ul>
            </li>
            <li>üìÅ Multi-Repository
                <ul>
                    <li>Multiple Git repositories support</li>
                    <li>Different branch support</li>
                    <li>Import/Export configurations</li>
                </ul>
            </li>
            <li>üõ† Post-Sync Commands
                <ul>
                    <li>Automatic command execution after sync</li>
                    <li>Multiple commands in sequence</li>
                    <li>Custom execution directory</li>
                </ul>
            </li>
            <li>üìä Sync Logging
                <ul>
                    <li>Real-time progress display</li>
                    <li>Detailed operation logs</li>
                    <li>Error notifications</li>
                </ul>
            </li>
        </ul>

        <h2>How to Use</h2>
        <ol>
            <li>After installation, open the configuration panel via <code>Tools -> Stack File Sync -> Configure</code></li>
            <li>Add new sync repository</li>
            <li>Configure sync rules and auto-sync options</li>
            <li>Click the sync button in the toolbar to start syncing</li>
        </ol>

        <h2>Configuration</h2>
        <h3>Repository Settings</h3>
        <ul>
            <li><strong>Name</strong>: Unique identifier for the repository</li>
            <li><strong>Git URL</strong>: Remote Git repository URL</li>
            <li><strong>Branch</strong>: Git branch to sync from</li>
            <li><strong>Source Directory</strong>: Directory in repository to sync</li>
            <li><strong>Target Directory</strong>: Local directory to sync to</li>
            <li><strong>File Patterns</strong>: File include/exclude patterns</li>
        </ul>

        <h3>Auto Sync Settings</h3>
        <ul>
            <li><strong>Enable Status</strong>: Turn auto sync on/off</li>
            <li><strong>Sync Interval</strong>: Set auto sync time interval (seconds)</li>
            <li><strong>Sync Mode</strong>: Full sync mode</li>
        </ul>

        <h3>Post-Sync Commands</h3>
        <ul>
            <li><strong>Order</strong>: Command execution order</li>
            <li><strong>Directory</strong>: Command execution directory</li>
            <li><strong>Command</strong>: Command to execute</li>
        </ul>
    ]]></description>

    <!-- Change notes for the plugin. -->
    <change-notes><![CDATA[
        <ul>
            <li>1.0.1
                <ul>
                    <li>Added import/export configuration feature</li>
                    <li>Fixed auto-sync issues</li>
                    <li>Improved UI experience</li>
                    <li>Enhanced log display format</li>
                </ul>
            </li>
            <li>1.0.0
                <ul>
                    <li>Support syncing files from Git repositories to local directories</li>
                    <li>Support selective file synchronization</li>
                    <li>Support file filtering patterns</li>
                    <li>Support automatic synchronization</li>
                    <li>Support custom post-sync commands</li>
                    <li>Support automatic file backup</li>
                    <li>Support sync history tracking</li>
                    <li>Support detailed sync logging</li>
                </ul>
            </li>
        </ul>
    ]]></change-notes>

    <!-- Product and plugin compatibility requirements.
         Read more: https://plugins.jetbrains.com/docs/intellij/plugin-compatibility.html -->
    <depends>com.intellij.modules.platform</depends>
    <depends>com.intellij.modules.vcs</depends>
    <depends>Git4Idea</depends>
    <depends>com.intellij.modules.java</depends>
    <depends>com.intellij.modules.lang</depends>
    <depends optional="true" config-file="withImages.xml">com.intellij.platform.images</depends>

    <!-- Extension points defined by the plugin.
         Read more: https://plugins.jetbrains.com/docs/intellij/plugin-extension-points.html -->
    <extensions defaultExtensionNs="com.intellij">
        <!-- Â∑•ÂÖ∑Á™óÂè£ -->
        <toolWindow id="Stack File Sync" 
                   secondary="true"
                   icon="/icons/logo.svg"
                   anchor="right"
                   factoryClass="com.stackfilesync.intellij.window.SyncToolWindowFactory"/>
                   
        <!-- ËÆæÁΩÆÈ°µÈù¢ÈÖçÁΩÆ -->
        <applicationConfigurable
                parentId="tools"
                instance="com.stackfilesync.intellij.settings.SyncSettings"
                id="com.stackfilesync.intellij.settings.SyncSettings"
                displayName="Stack File Sync"/>
                
        <!-- ÊåÅ‰πÖÂåñÊúçÂä° -->
        <applicationService
                serviceImplementation="com.stackfilesync.intellij.settings.SyncSettingsState"/>
        
        <!-- ÂéÜÂè≤ËÆ∞ÂΩïÊúçÂä° -->
        <applicationService 
            serviceImplementation="com.stackfilesync.intellij.service.SyncHistoryService"/>
        
        <!-- Ëá™Âä®ÂêåÊ≠•ÊúçÂä° -->
        <projectService 
            serviceImplementation="com.stackfilesync.intellij.sync.AutoSyncManager"/>
            
        <!-- ÂêØÂä®Ê¥ªÂä® -->
        <postStartupActivity 
            implementation="com.stackfilesync.intellij.sync.AutoSyncStartupActivity"/>
        
        <!-- ÈÄöÁü•ÁªÑ -->
        <notificationGroup id="Stack File Sync"
                          displayType="BALLOON"
                          key="notification.group.name"/>
        
        <!-- Êó•ÂøóÊúçÂä° -->
        <projectService 
            serviceImplementation="com.stackfilesync.intellij.logs.LogService"/>
    </extensions>

    <actions>
        <!-- ÂêåÊ≠•Êñá‰ª∂Âä®‰Ωú -->
        <action id="StackFileSync.SyncFiles" 
                class="com.stackfilesync.intellij.actions.SyncFilesAction"
                icon="/icons/sync.svg"
                text="ÂêåÊ≠•Êñá‰ª∂"
                description="ÂêåÊ≠•ËøúÁ®ã‰ªìÂ∫ìÊñá‰ª∂">
            <add-to-group group-id="ToolsMenu" anchor="last"/>
            <keyboard-shortcut keymap="$default" first-keystroke="ctrl alt S"/>
        </action>
        
        <!-- ÈÖçÁΩÆÂêåÊ≠•Âä®‰Ωú -->
        <action id="StackFileSync.Configure"
                class="com.stackfilesync.intellij.actions.ConfigureAction"
                text="ÈÖçÁΩÆÂêåÊ≠•"
                description="ÈÖçÁΩÆÂêåÊ≠•ËÆæÁΩÆ">
            <add-to-group group-id="ToolsMenu" anchor="last"/>
            <keyboard-shortcut keymap="$default" first-keystroke="ctrl alt COMMA"/>
        </action>
        
        <!-- Ëá™Âä®ÂêåÊ≠•Âä®‰Ωú -->
        <action id="StackFileSync.ToggleAutoSync"
                class="com.stackfilesync.intellij.actions.ToggleAutoSyncAction"
                text="ÂàáÊç¢Ëá™Âä®ÂêåÊ≠•"
                description="ÂêØÁî®/Á¶ÅÁî®Ëá™Âä®ÂêåÊ≠•">
            <add-to-group group-id="StackFileSync.RepositoryActions" anchor="last"/>
        </action>
    </actions>
</idea-plugin>