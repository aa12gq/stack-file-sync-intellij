<!-- Plugin Configuration File. Read more: https://plugins.jetbrains.com/docs/intellij/plugin-configuration-file.html -->
<idea-plugin>
    <!-- Unique identifier of the plugin. It should be FQN. It cannot be changed between the plugin versions. -->
    <id>com.stackfilesync.intellij</id>

    <!-- Public plugin name should be written in Title Case.
         Guidelines: https://plugins.jetbrains.com/docs/marketplace/plugin-overview-page.html#plugin-name -->
    <name>Stack File Sync</name>

    <!-- 修改供应商信息 -->
    <vendor email="aa12gq@gmail.com" url="https://github.com/aa12gq">aa12gq</vendor>

    <!-- Description of the plugin displayed on the Plugin Page and IDE Plugin Manager.
         Simple HTML elements (text formatting, paragraphs, and lists) can be added inside of <![CDATA[ ]]> tag.
         Guidelines: https://plugins.jetbrains.com/docs/marketplace/plugin-overview-page.html#plugin-description -->
    <description><![CDATA[
        <h1>Stack File Sync</h1>
        <p>Stack File Sync 是一个强大的 IntelliJ IDEA 插件，用于在多个项目之间同步文件和代码片段。它提供了一个简单而灵活的方式来管理和同步您的代码资产。</p>
        
        <p><img src="https://raw.githubusercontent.com/aa12gq/stack-file-sync-intellij/main/docs/images/demonstration.gif" alt="演示" width="800"/></p>
        
        <h2>功能特点</h2>
        <ul>
            <li>🔄 实时文件同步</li>
            <li>🕒 可配置的自动同步间隔</li>
            <li>📁 多仓库支持</li>
            <li>🔒 安全的文件备份</li>
            <li>⚡ 高性能文件传输</li>
            <li>🛠 可自定义的同步规则</li>
            <li>📊 详细的同步日志</li>
        </ul>

        <h2>使用方法</h2>
        <ol>
            <li>安装插件后，通过 <code>Tools -> Stack File Sync -> Configure</code> 打开配置面板</li>
            <li>添加新的同步仓库</li>
            <li>配置同步规则和自动同步选项</li>
            <li>点击工具栏的同步按钮开始同步</li>
        </ol>

        <h2>配置说明</h2>
        <h3>仓库配置</h3>
        <ul>
            <li><strong>名称</strong>: 仓库的唯一标识符</li>
            <li><strong>本地路径</strong>: 需要同步的本地文件夹路径</li>
            <li><strong>远程路径</strong>: 远程同步目标路径</li>
            <li><strong>同步规则</strong>: 文件包含/排除规则</li>
            <li><strong>自动同步</strong>: 启用/禁用自动同步功能</li>
        </ul>

        <h3>自动同步设置</h3>
        <ul>
            <li><strong>启用状态</strong>: 开启或关闭自动同步</li>
            <li><strong>同步间隔</strong>: 设置自动同步的时间间隔（秒）</li>
            <li><strong>同步模式</strong>: 选择单向或双向同步</li>
        </ul>
    ]]></description>

    <!-- Change notes for the plugin. -->
    <change-notes><![CDATA[
        Initial release:
        - Basic file synchronization
        - Auto sync support
        - Backup functionality
        - UI components
    ]]></change-notes>

    <!-- Product and plugin compatibility requirements.
         Read more: https://plugins.jetbrains.com/docs/intellij/plugin-compatibility.html -->
    <depends>com.intellij.modules.platform</depends>
    <depends>Git4Idea</depends>
    <depends>com.intellij.modules.java</depends>

    <!-- Extension points defined by the plugin.
         Read more: https://plugins.jetbrains.com/docs/intellij/plugin-extension-points.html -->
    <extensions defaultExtensionNs="com.intellij">
        <!-- 工具窗口 -->
        <toolWindow id="Stack File Sync" 
                   secondary="true"
                   icon="/icons/logo.svg"
                   anchor="right"
                   factoryClass="com.stackfilesync.intellij.window.SyncToolWindowFactory"/>
                   
        <!-- 设置页面配置 -->
        <applicationConfigurable
                parentId="tools"
                instance="com.stackfilesync.intellij.settings.SyncSettings"
                id="com.stackfilesync.intellij.settings.SyncSettings"
                displayName="Stack File Sync"/>
                
        <!-- 持久化服务 -->
        <applicationService
                serviceImplementation="com.stackfilesync.intellij.settings.SyncSettingsState"/>
        
        <!-- 历史记录服务 -->
        <applicationService 
            serviceImplementation="com.stackfilesync.intellij.service.SyncHistoryService"/>
        
        <!-- 自动同步服务 -->
        <projectService 
            serviceImplementation="com.stackfilesync.intellij.sync.AutoSyncManager"/>
        
        <!-- 通知组 -->
        <notificationGroup id="Stack File Sync"
                          displayType="BALLOON"
                          key="notification.group.name"/>
        
        <!-- 日志服务 -->
        <projectService 
            serviceImplementation="com.stackfilesync.intellij.logs.LogService"/>
    </extensions>

    <actions>
        <!-- 同步文件动作 -->
        <action id="StackFileSync.SyncFiles" 
                class="com.stackfilesync.intellij.actions.SyncFilesAction"
                icon="/icons/sync.svg"
                text="同步文件"
                description="同步远程仓库文件">
            <add-to-group group-id="ToolsMenu" anchor="last"/>
            <keyboard-shortcut keymap="$default" first-keystroke="ctrl alt S"/>
        </action>
        
        <!-- 配置同步动作 -->
        <action id="StackFileSync.Configure"
                class="com.stackfilesync.intellij.actions.ConfigureAction"
                text="配置同步"
                description="配置同步设置">
            <add-to-group group-id="ToolsMenu" anchor="last"/>
            <keyboard-shortcut keymap="$default" first-keystroke="ctrl alt COMMA"/>
        </action>
        
        <!-- 自动同步动作 -->
        <action id="StackFileSync.ToggleAutoSync"
                class="com.stackfilesync.intellij.actions.ToggleAutoSyncAction"
                text="切换自动同步"
                description="启用/禁用自动同步">
            <add-to-group group-id="StackFileSync.RepositoryActions" anchor="last"/>
        </action>
    </actions>
</idea-plugin>